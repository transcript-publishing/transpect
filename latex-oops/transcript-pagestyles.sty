\NeedsTeXFormat{LaTeX2e}[2018/12/01]
\ProvidesPackage{transcript-pagestyles}[2021/04/09 transcript]\relax

\def\ps@empty{%
  \let\@oddhead\@empty
  \let\@oddfoot\@empty
  \let\@evenhead\@empty
  \let\@evenfoot\@empty
}

\gdef\tp@str@part{part}

\def\ps@headings{%
  % Gerade, linke Seiten.
  \def\left@mark{%
    \def\numberline####1{####1\enskip}%
    % Das Inhaltsverzeichnis wird beim Erstellen von Kopfzeilen exkludiert.
    \ifx\@chaptername\contentsname
    \else
      % Anthologien.
      \ifcollection
        \ifx\ts@journal@series\ts@str@journal@zig
          % Bei ZiG die Abschnitte »Rezensionen« sowie »Autorinnen und Autoren« betreffend.
          \ifx\tp@authormark\relax
            \tpRunBookTitle
          \else
            \tp@authormark
          \fi%
        \else
          % Mit Respektseiten.
          \ifx\has@parts\relax
            \ifcsname tp@partmark\endcsname
              \tp@partmark
            \else
              \tpRunBookTitle
            \fi%
          % Ohne Respektseiten.
          \else
            \tpRunBookTitle%
          \fi
        \fi
      % Monographien.
      \else
        \tpRunBookTitle%
      \fi
    \fi
  }%
  % Rechte, ungerade Seiten.
  \def\right@mark{%
    \def\numberline####1{####1\enskip}%
    % Das Inhaltsverzeichnis wird beim Erstellen von Kopfzeilen exkludiert.
    \ifx\@chaptername\contentsname
    \else
      % Anthologien.
      \ifcollection
        \ifx\tp@authormark\relax
        \else
          \ifx\ts@journal@series\ts@str@journal@zig
          \else
            \tp@authormark:\space%
          \fi
        \fi%
        \tp@chaptermark%
      % Monographien.
      \else
        \ifx\tp@chapternumber\relax
        \else
          \tp@chapternumber\space%
        \fi%
        \tp@chaptermark%
      \fi
    \fi
  }%
  \def\@oddhead{\hfill{\small\sffamily\if@TLtwenty\upseries\fi\right@mark\rlap{\hb@xt@8mm{\hfill\thepage}}%
      % \ifx\lay b\relax\llap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    }}%
  \def\@evenhead{%
    % \ifx\lay b\relax\rlap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    {\small\sffamily\if@TLtwenty\upseries\fi\llap{\hb@xt@8mm{\thepage\hfill}}\left@mark}\hfill}%
  \let\@oddfoot\@empty
  \let\@evenfoot\@empty
  \def\partmark##1{%
    \protected@xdef\tp@partmark{##1}%
  }%
  \def\chaptermark##1{%
    \protected@xdef\tp@chaptermark{##1}%
  }%
}


\def\ps@backmatter{% Ticket 14571.
  \def\left@mark{%
    \def\numberline####1{####1\enskip}%
    \ifcollection
      % Mit Respektseiten.
      \ifx\has@parts\relax
        %\ifjournal
        %  % U. a. für ZiG nötig, weil diese Dokumente vollständig Backmatter sind. | Nach Rücksprache am 20.12.2023 wieder entfernt. Respekttitel sind korrekt.
        %  \tp@authormark
        %\else
          \ifcsname tp@partmark\endcsname
            \tp@partmark%
          \else
            \tpRunBookTitle%
          \fi%
        %\fi
      % Ohne Respektseiten.
      \else
        \tpRunBookTitle%
      \fi
    % Monographien.
    \else
      \tpRunBookTitle%
    \fi
    %\tp@authormark%
  }%
  \def\right@mark{%
    \def\numberline####1{####1\enskip}%
    \tp@chaptermark%
  }%
  \def\@oddhead{\hfill{\small\sffamily\if@TLtwenty\ltseries\fi\right@mark\rlap{\hb@xt@8mm{\hfill\thepage}}%
      % \ifx\lay b\relax\llap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    }}%
  \def\@evenhead{%
    % \ifx\lay b\relax\rlap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    {\small\sffamily\if@TLtwenty\ltseries\fi\llap{\hb@xt@8mm{\thepage\hfill}}\left@mark}\hfill}%
  \let\@oddfoot\@empty
  \let\@evenfoot\@empty
  \def\partmark##1{%
    \protected@xdef\tp@partmark{##1}%
  }%
  \def\chaptermark##1{%
    \protected@xdef\tp@chaptermark{##1}%
  }%
}


\def\ps@altRunTitles{% Ticket 16094. Pagestyle identisch mit Backmatter, aber links wird in jedem Fall der Buchtitel eingetragen.
  \def\left@mark{%
    \def\numberline####1{####1\enskip}%
    \ifx\tp@authormark\relax
      \tpRunBookTitle%
    \else
      \tp@authormark
    \fi%
  }%
  \def\right@mark{%
    \def\numberline####1{####1\enskip}%
    \tp@chaptermark%
  }%
  \def\@oddhead{%
    \hfill{\small\sffamily\if@TLtwenty\ltseries\fi\right@mark\rlap{\hb@xt@8mm{\hfill\thepage}}%
      % \ifx\lay b\relax\llap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    }%
  }%
  \def\@evenhead{%
    % \ifx\lay b\relax\rlap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    {\small\sffamily\if@TLtwenty\ltseries\fi\llap{\hb@xt@8mm{\thepage\hfill}}\left@mark}\hfill}%
  \let\@oddfoot\@empty
  \let\@evenfoot\@empty
  \def\partmark##1{%
    \protected@xdef\tp@partmark{##1}%
  }%
  \def\chaptermark##1{%
    \protected@xdef\tp@chaptermark{##1}%
  }%
}


\def\ps@articlehead{%
  \ps@headings
  \def\@oddhead{\smash{\vtop{\hfill\footnotesize\nsffamily\tpNamespace{titlepage}\tpUseComp{JournalName}\space\tpUseComp{Year}\enskip\tpUseComp{Volume}/\tpUseComp{Issue}\ifx\@articleLicenceLogo\relax\else\enskip\includegraphics[height=7bp]{\@articleLicenceLogo}\fi\@@par\hfill \@articleDOI}}}%
  \def\@oddfoot{\smash{\parskip\z@\parindent\z@\vbox{\box\@articlefooterbox}}}
}

\pagestyle{headings}
