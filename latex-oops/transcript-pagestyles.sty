\NeedsTeXFormat{LaTeX2e}[2018/12/01]
\ProvidesPackage{transcript-pagestyles}[2021/04/09 transcript]\relax

\def\ps@empty{%
  \let\@oddhead\@empty
  \let\@oddfoot\@empty
  \let\@evenhead\@empty
  \let\@evenfoot\@empty
}

\gdef\tp@str@part{part}

\def\ps@headings{%
  % Gerade, linke Seiten.
  \def\left@mark{%
    \def\numberline####1{####1\enskip}%
    % Das Inhaltsverzeichnis wird beim Erstellen von Kopfzeilen exkludiert.
    \ifx\@chaptername\contentsname
    \else
      % Anthologien.
      \ifcollection
        % Mit Respektseiten.
        \ifx\has@parts\relax
          % Ein Part setzt links den Buchtitel.
          \ifx\tp@currentHeading\tp@str@part
            \tpRunBookTitle%
          % Ein Kapitel setzt links den durch den aktuellen Part bestimmten Respekttitel, …
          \else
            % … sofern dieser schon vorhanden ist (tritt bspw. auf, wenn Contribution vor erstem Part kommt), …
            \ifcsname tp@partmark\endcsname
              \tp@partmark%
            % … andernfalls den Buchtitel
            \else
              \tpRunBookTitle%
            \fi
          \fi
        % Ohne Respektseiten.
        \else
          \tp@authormark%
        \fi
      % Monographien.
      \else
        % Mit Respektseiten.
        \ifx\has@parts\relax
          % Ein Part setzt links den Buchtitel.
          \ifx\tp@currentHeading\tp@str@part
            \tpRunBookTitle%
          % Ein Kapitel setzt links den durch den aktuellen Part bestimmten Respekttitel, …
          \else
            % … sofern dieser schon vorhanden ist (tritt bspw. auf, wenn Contribution vor erstem Part kommt), …
            \ifcsname tp@partmark\endcsname
              \tp@partmark%
            % … andernfalls den Buchtitel
            \else
              \tpRunBookTitle%
            \fi
          \fi%
        % Ohne Respektseiten.
        \else
          \tpRunBookTitle%
        \fi
      \fi
    \fi
  }%
  % Rechte, ungerade Seiten.
  \def\right@mark{%
    \def\numberline####1{####1\enskip}%
    % Das Inhaltsverzeichnis wird beim Erstellen von Kopfzeilen exkludiert.
    \ifx\@chaptername\contentsname
    \else
      % Anthologien.
      \ifcollection
        % Mit Respektseiten.
        \ifx\has@parts\relax
          % Ein Part setzt rechts seinen Respekttitel.
          \ifx\tp@currentHeading\tp@str@part
            \tp@partmark%
          % Ein Kapitel setzt rechts den Autor des Beitrags, sofern vorhanden, sowie den Beitragstitel.
          \else
            \expandafter\ifx\tp@authormark\relax
            \else
              \tp@authormark:\space%
            \fi%
            \tp@chaptermark%
          \fi%
        % Ohne Respektseiten.
        \else
          \tp@chaptermark%
        \fi
      % Monographien.
      \else
        % Mit Respektseiten.
        \ifx\has@parts\relax
          % Ein Part setzt rechts seinen Respekttitel.
          \ifx\tp@currentHeading\tp@str@part
            \tp@partmark%
          % Ein Kapitel setzt rechts den Beitragstitel.
          \else
            \tp@chaptermark%
          \fi%
        % Ohne Respektseiten.
        \else
          \tp@chaptermark%
        \fi
      \fi
    \fi
  }%
  \def\@oddhead{\hfill{\small\sffamily\right@mark\rlap{\hb@xt@8mm{\hfill\thepage}}%
      % \ifx\lay b\relax\llap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    }}%
  \def\@evenhead{%
    % \ifx\lay b\relax\rlap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    {\small\sffamily\llap{\hb@xt@8mm{\thepage\hfill}}\left@mark}\hfill}%
  \let\@oddfoot\@empty
  \let\@evenfoot\@empty
  \def\partmark##1{%
    \protected@xdef\@partmark{##1}%
  }%
  \def\chaptermark##1{%
    \protected@xdef\@chaptermark{##1}%
  }%
}


\def\ps@backmatter{% Ticket 14571.
  \def\left@mark{%
    \def\numberline####1{####1\enskip}%
    \tp@runningHeadingLeft@backmatter%
  }%
  \def\right@mark{%
    \def\numberline####1{####1\enskip}%
    \tp@runningHeadingRight@backmatter%
  }%
  \def\@oddhead{\hfill{\small\sffamily\right@mark\rlap{\hb@xt@8mm{\hfill\thepage}}%
      % \ifx\lay b\relax\llap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    }}%
  \def\@evenhead{%
    % \ifx\lay b\relax\rlap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    {\small\sffamily\llap{\hb@xt@8mm{\thepage\hfill}}\left@mark}\hfill}%
  \let\@oddfoot\@empty
  \let\@evenfoot\@empty
  \def\partmark##1{%
    \protected@xdef\@partmark{##1}%
  }%
  \def\chaptermark##1{%
    \protected@xdef\@chaptermark{##1}%
  }%
}


\def\ps@articlehead{%
  \ps@headings
  \def\@oddhead{\smash{\vtop{\hfill\footnotesize\nsffamily\tpNamespace{titlepage}\tpUseComp{JournalName}\space\tpUseComp{Year}\enskip\tpUseComp{Volume}/\tpUseComp{Issue}\ifx\@articleLicenceLogo\relax\else\enskip\includegraphics[height=7bp]{\@articleLicenceLogo}\fi\@@par\hfill \@articleDOI}}}%
  \def\@oddfoot{\smash{\parskip\z@\parindent\z@\vbox{\box\@articlefooterbox}}}
}

\pagestyle{headings}
