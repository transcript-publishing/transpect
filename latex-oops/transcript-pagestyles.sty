\NeedsTeXFormat{LaTeX2e}[2018/12/01]
\ProvidesPackage{transcript-pagestyles}[2021/04/09 transcript]\relax

\def\ps@empty{%
  \let\@oddhead\@empty
  \let\@oddfoot\@empty
  \let\@evenhead\@empty
  \let\@evenfoot\@empty
}

\gdef\tp@str@part{part}

\def\ps@headings{%
  % Gerade, linke Seiten.
  \def\left@mark{%
    \def\numberline####1{####1\enskip}%
    % Das Inhaltsverzeichnis wird beim Erstellen von Kopfzeilen exkludiert.
    \ifx\@chaptername\contentsname
    \else
      % Anthologien.
      \ifcollection
        % Mit Respektseiten.
        \ifx\has@parts\relax
          \tp@partmark%
        % Ohne Respektseiten.
        \else
          \tpRunBookTitle%
        \fi
      % Monographien.
      \else
        %\expandafter\ifx\tp@authormark\relax
        %\else
        %  \tp@authormark:\space%
        %\fi%
        \tpRunBookTitle%
      \fi
    \fi
  }%
  % Rechte, ungerade Seiten.
  \def\right@mark{%
    \def\numberline####1{####1\enskip}%
    % Das Inhaltsverzeichnis wird beim Erstellen von Kopfzeilen exkludiert.
    \ifx\@chaptername\contentsname
    \else
      % Anthologien.
      \ifcollection
        \expandafter\ifx\tp@authormark\relax
        \else
          \tp@authormark:\space%
        \fi%
        \tp@chaptermark%
      % Monographien.
      \else
        \tp@chaptermark%
      \fi
    \fi
  }%
  \def\@oddhead{\hfill{\small\sffamily\right@mark\rlap{\hb@xt@8mm{\hfill\thepage}}%
      % \ifx\lay b\relax\llap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    }}%
  \def\@evenhead{%
    % \ifx\lay b\relax\rlap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    {\small\sffamily\llap{\hb@xt@8mm{\thepage\hfill}}\left@mark}\hfill}%
  \let\@oddfoot\@empty
  \let\@evenfoot\@empty
  \def\partmark##1{%
    \protected@xdef\@partmark{##1}%
  }%
  \def\chaptermark##1{%
    \protected@xdef\@chaptermark{##1}%
  }%
}


\def\ps@backmatter{% Ticket 14571.
  \def\left@mark{%
    \def\numberline####1{####1\enskip}%
    \tp@runningHeadingLeft@backmatter%
  }%
  \def\right@mark{%
    \def\numberline####1{####1\enskip}%
    \tp@runningHeadingRight@backmatter%
  }%
  \def\@oddhead{\hfill{\small\sffamily\right@mark\rlap{\hb@xt@8mm{\hfill\thepage}}%
      % \ifx\lay b\relax\llap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    }}%
  \def\@evenhead{%
    % \ifx\lay b\relax\rlap{\smash{\lower1.35mm\hb@xt@\textwidth{\rule{\textwidth}{.4\p@}}}}\fi
    {\small\sffamily\llap{\hb@xt@8mm{\thepage\hfill}}\left@mark}\hfill}%
  \let\@oddfoot\@empty
  \let\@evenfoot\@empty
  \def\partmark##1{%
    \protected@xdef\@partmark{##1}%
  }%
  \def\chaptermark##1{%
    \protected@xdef\@chaptermark{##1}%
  }%
}


\def\ps@articlehead{%
  \ps@headings
  \def\@oddhead{\smash{\vtop{\hfill\footnotesize\nsffamily\tpNamespace{titlepage}\tpUseComp{JournalName}\space\tpUseComp{Year}\enskip\tpUseComp{Volume}/\tpUseComp{Issue}\ifx\@articleLicenceLogo\relax\else\enskip\includegraphics[height=7bp]{\@articleLicenceLogo}\fi\@@par\hfill \@articleDOI}}}%
  \def\@oddfoot{\smash{\parskip\z@\parindent\z@\vbox{\box\@articlefooterbox}}}
}

\pagestyle{headings}
